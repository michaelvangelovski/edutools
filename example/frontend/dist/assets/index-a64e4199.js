import{j as m,r as d,u as p,L as f,B as y,T as g,C as b,G as x,a as h,b as u,c as S,R as v,S as j,d as c,e as L,f as w,M as N}from"./vendor-84e8b10c.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function l(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(r){if(r.ep)return;r.ep=!0;const t=l(r);fetch(r.href,t)}})();const e=m.jsx,a=m.jsxs,O=()=>window.appdata.config,P=n=>Object.keys(n).map(o=>`${o}=${n[o]}`).join("&"),T=(n,o)=>(o=o||{},o.sesskey=O().sesskey,n+"?"+P(o)),E=()=>{const[n,o]=d.useState({response:null,error:!1,loading:!1}),l=(s={method:"GET",body:{},query:{}},r="/app/platform/service.php")=>{(s.query||s.body)&&(console.log("Running ajax"),o({response:null,error:null,loading:!0}),fetch(T(r,s.query),{method:s.method||"GET",headers:{"Content-Type":"application/json"},body:s.method!=="GET"&&JSON.stringify(s.body)}).then(async t=>{const i=await t.json();o({response:i,error:!t.ok,loading:!1})}).catch(t=>{o({response:t,error:!0,loading:!1})}))};return[n.response,n.error,n.loading,l]},F=()=>{const[n,o,l,s]=E(),r=p({initialValues:{email:"",termsOfService:!1},validate:{email:i=>/^\S+@\S+$/.test(i)?null:"Invalid email"}}),t=i=>{s({method:"POST",body:{methodname:"app_example-test_service",args:i}})};return n?e("p",{children:"There was a response. Possibly redirect?"}):a(d.Fragment,{children:[e("h1",{className:"text-3xl font-bold underline",children:"Form"}),a("div",{style:{position:"relative"},children:[e(f,{visible:l,overlayBlur:2}),e(y,{sx:{maxWidth:300},mx:"auto",children:a("form",{onSubmit:r.onSubmit(t),children:[e(g,{withAsterisk:!0,label:"Email",placeholder:"your@email.com",...r.getInputProps("email")}),e(b,{mt:"md",label:"I agree to sell my privacy",...r.getInputProps("termsOfService",{type:"checkbox"})}),a(x,{position:"right",mt:"md",children:[e(h,{href:"/",children:e(u,{children:"List"})}),e(u,{type:"submit",children:"Submit"})]}),o&&e("div",{children:" There was an error... "})]})}),e("ul",{children:n&&n.map(i=>e("li",{children:i.name}))})]})]})},I=()=>e(d.Fragment,{children:a("div",{children:[e("h1",{className:"text-3xl font-bold underline",children:"List"}),e(h,{href:"/form",className:"active",children:"Form"})]})});function R(){const[n]=S();return console.log(n),e("main",{children:e(v,{base:"/app/example",children:a(j,{children:[e(c,{path:"/",children:e(I,{})}),e(c,{path:"/form",children:e(F,{})}),e(c,{children:"404, Not Found!"})]})})})}L.createRoot(document.getElementById("root")).render(e(w.StrictMode,{children:e(N,{withGlobalStyles:!0,withNormalizeCSS:!0,children:e(R,{})})}));
